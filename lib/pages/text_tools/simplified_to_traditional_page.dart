import 'package:flutter/material.dart';
import 'package:pinyin/pinyin.dart';
import '../../components/base_tool_page.dart';
import '../../components/input_output_card.dart';
import '../../components/custom_button.dart';
import '../../components/colors.dart';

class SimplifiedToTraditionalPage extends StatefulWidget {
  const SimplifiedToTraditionalPage({super.key});

  @override
  // ignore: library_private_types_in_public_api
  _SimplifiedToTraditionalPageState createState() => _SimplifiedToTraditionalPageState();
}

class _SimplifiedToTraditionalPageState extends State<SimplifiedToTraditionalPage> {
  final TextEditingController _inputController = TextEditingController();
  final TextEditingController _outputController = TextEditingController();

  // 简体到繁体的映射表（常用字部分）
  final Map<String, String> _simplifiedToTraditional = {
    '爱': '愛', '碍': '礙', '袄': '襖', '罢': '罷', '摆': '擺', '办': '辦', '绊': '絆', '帮': '幫',
    '宝': '寶', '报': '報', '币': '幣', '毙': '斃', '标': '標', '表': '錶', '别': '彆', '变': '變',
    '滨': '濱', '补': '補', '才': '纔', '参': '參', '惨': '慘', '灿': '燦', '层': '層', '产': '產',
    '馋': '饞', '缠': '纏', '忏': '懺', '偿': '償', '厂': '廠', '彻': '徹', '尘': '塵', '陈': '陳',
    '衬': '襯', '撑': '撐', '称': '稱', '惩': '懲', '迟': '遲', '冲': '衝', '虫': '蟲', '丑': '醜',
    '出': '齣', '础': '礎', '储': '儲', '触': '觸', '处': '處', '传': '傳', '疮': '瘡', '闯': '闖',
    '创': '創', '词': '詞', '辞': '辭', '聪': '聰', '丛': '叢', '窜': '竄', '错': '錯', '达': '達',
    '带': '帶', '贷': '貸', '担': '擔', '胆': '膽', '导': '導', '灯': '燈', '邓': '鄧', '敌': '敵',
    '籴': '糴', '递': '遞', '点': '點', '淀': '澱', '电': '電', '冬': '鼕', '斗': '鬥', '独': '獨',
    '吨': '噸', '夺': '奪', '堕': '墮', '儿': '兒', '尔': '爾', '发': '發', '罚': '罰', '阀': '閥',
    '珐': '琺', '矾': '礬', '范': '範', '贩': '販', '饭': '飯', '访': '訪', '纺': '紡', '飞': '飛',
    '废': '廢', '奋': '奮', '粪': '糞', '凤': '鳳', '肤': '膚', '妇': '婦', '复': '復', '盖': '蓋',
    '干': '乾', '赶': '趕', '个': '個', '巩': '鞏', '沟': '溝', '构': '構', '购': '購', '够': '夠',
    '蛊': '蠱', '顾': '顧', '刮': '颳', '关': '關', '观': '觀', '柜': '櫃', '广': '廣', '归': '歸',
    '龟': '龜', '国': '國', '过': '過', '汉': '漢', '号': '號', '合': '閤', '轰': '轟', '红': '紅',
    '后': '後', '胡': '鬍', '壶': '壺', '护': '護', '沪': '滬', '户': '戶', '哗': '譁', '华': '華',
    '画': '畫', '怀': '懷', '坏': '壞', '欢': '歡', '环': '環', '还': '還', '回': '迴', '会': '會',
    '汇': '匯', '诲': '誨', '绘': '繪', '荤': '葷', '浑': '渾', '伙': '夥', '获': '獲', '击': '擊',
    '鸡': '雞', '积': '積', '极': '極', '际': '際', '继': '繼', '纪': '紀', '夹': '夾', '家': '傢',
    '价': '價', '艰': '艱', '监': '監', '坚': '堅', '茧': '繭', '俭': '儉', '捡': '撿', '简': '簡',
    '减': '減', '荐': '薦', '舰': '艦', '剑': '劍', '浆': '漿', '奖': '獎', '讲': '講', '胶': '膠',
    '浇': '澆', '骄': '驕', '搅': '攪', '绞': '絞', '矫': '矯', '侥': '僥', '脚': '腳', '觉': '覺',
    '阶': '階', '节': '節', '洁': '潔', '结': '結', '捷': '捷', '竭': '竭', '洁': '潔', '诫': '誡',
    '锦': '錦', '仅': '僅', '进': '進', '尽': '盡', '劲': '勁', '旧': '舊', '剧': '劇', '据': '據',
    '惧': '懼', '卷': '捲', '绢': '絹', '觉': '覺', '决': '決', '诀': '訣', '绝': '絕', '钧': '鈞',
    '军': '軍', '开': '開', '凯': '凱', '垦': '墾', '恳': '懇', '抠': '摳', '库': '庫', '裤': '褲',
    '夸': '誇', '块': '塊', '侩': '儈', '宽': '寬', '矿': '礦', '亏': '虧', '窥': '窺', '馈': '饋',
    '困': '睏', '腊': '臘', '蜡': '蠟', '兰': '蘭', '拦': '攔', '栏': '欄', '烂': '爛', '滥': '濫',
    '捞': '撈', '劳': '勞', '乐': '樂', '垒': '壘', '类': '類', '累': '纍', '里': '裏', '礼': '禮',
    '丽': '麗', '历': '歷', '励': '勵', '砾': '礫', '隶': '隸', '俩': '倆', '联': '聯', '怜': '憐',
    '炼': '煉', '练': '練', '粮': '糧', '疗': '療', '辽': '遼', '了': '瞭', '猎': '獵', '邻': '鄰',
    '临': '臨', '铃': '鈴', '灵': '靈', '龄': '齡', '岭': '嶺', '刘': '劉', '浏': '瀏', '流': '流',
    '楼': '樓', '炉': '爐', '陆': '陸', '录': '錄', '赂': '賂', '乱': '亂', '仑': '侖', '罗': '羅',
    '萝': '蘿', '逻': '邏', '锣': '鑼', '箩': '籮', '骆': '駱', '妈': '媽', '马': '馬', '骂': '罵',
    '吗': '嗎', '买': '買', '麦': '麥', '卖': '賣', '迈': '邁', '脉': '脈', '蛮': '蠻', '馒': '饅',
    '谩': '謾', '猫': '貓', '锚': '錨', '铆': '鉚', '贸': '貿', '么': '麼', '霉': '黴', '每': '每',
    '们': '們', '闷': '悶', '梦': '夢', '眯': '瞇', '觅': '覓', '秘': '祕', '幂': '冪', '绵': '綿',
    '缅': '緬', '庙': '廟', '灭': '滅', '蔑': '蔑', '亩': '畝', '恼': '惱', '脑': '腦', '闹': '鬧',
    '馁': '餒', '内': '內', '嫩': '嫩', '能': '能', '拟': '擬', '酿': '釀', '鸟': '鳥', '聂': '聶',
    '啮': '齧', '镊': '鑷', '镍': '鎳', '柠': '檸', '宁': '寧', '拧': '擰', '泞': '濘', '纽': '紐',
    '钮': '鈕', '农': '農', '脓': '膿', '浓': '濃', '弄': '弄', '疟': '瘧', '诺': '諾', '哦': '哦',
    '欧': '歐', '殴': '毆', '呕': '嘔', '沤': '漚', '盘': '盤', '庞': '龐', '刨': '刨', '赔': '賠',
    '喷': '噴', '鹏': '鵬', '碰': '碰', '骗': '騙', '票': '票', '贫': '貧', '苹': '蘋', '凭': '憑',
    '评': '評', '泼': '潑', '扑': '撲', '铺': '鋪', '栖': '棲', '齐': '齊', '骑': '騎', '棋': '棋',
    '启': '啟', '气': '氣', '弃': '棄', '汽': '汽', '纤': '纖', '签': '簽', '牵': '牽', '钳': '鉗',
    '前': '前', '钱': '錢', '潜': '潛', '浅': '淺', '谴': '譴', '枪': '槍', '呛': '嗆', '墙': '牆',
    '蔷': '薔', '强': '強', '抢': '搶', '锹': '鍬', '桥': '橋', '乔': '喬', '侨': '僑', '翘': '翹',
    '窍': '竅', '窃': '竊', '寝': '寢', '庆': '慶', '琼': '瓊', '秋': '秋', '曲': '麯', '权': '權',
    '劝': '勸', '确': '確', '却': '卻', '鹊': '鵲', '让': '讓', '扰': '擾', '热': '熱', '认': '認',
    '纫': '紉', '荣': '榮', '绒': '絨', '软': '軟', '锐': '銳', '闰': '閏', '润': '潤', '洒': '灑',
    '萨': '薩', '伞': '傘', '丧': '喪', '骚': '騷', '扫': '掃', '涩': '澀', '杀': '殺', '纱': '紗',
    '筛': '篩', '晒': '曬', '删': '刪', '衫': '衫', '姗': '姍', '陕': '陝', '闪': '閃', '陕': '陝',
    '伤': '傷', '赏': '賞', '烧': '燒', '绍': '紹', '赊': '賒', '摄': '攝', '绅': '紳', '审': '審',
    '婶': '嬸', '肾': '腎', '渗': '滲', '声': '聲', '胜': '勝', '圣': '聖', '师': '師', '狮': '獅',
    '湿': '濕', '诗': '詩', '尸': '屍', '时': '時', '蚀': '蝕', '实': '實', '适': '適', '势': '勢',
    '视': '視', '试': '試', '寿': '壽', '兽': '獸', '书': '書', '术': '術', '树': '樹', '帅': '帥',
    '双': '雙', '谁': '誰', '税': '稅', '顺': '順', '说': '說', '硕': '碩', '烁': '爍', '丝': '絲',
    '饲': '飼', '耸': '聳', '怂': '慫', '颂': '頌', '讼': '訟', '诵': '誦', '苏': '蘇', '诉': '訴',
    '肃': '肅', '虽': '雖', '随': '隨', '绥': '綏', '岁': '歲', '孙': '孫', '损': '損', '笋': '筍',
    '缩': '縮', '锁': '鎖', '它': '牠', '塌': '塌', '摊': '攤', '坛': '壇', '叹': '歎', '汤': '湯',
    '烫': '燙', '涛': '濤', '绦': '絛', '讨': '討', '腾': '騰', '誊': '謄', '体': '體', '屉': '屜',
    '条': '條', '贴': '貼', '铁': '鐵', '厅': '廳', '听': '聽', '烃': '烴', '停': '停', '头': '頭',
    '图': '圖', '涂': '塗', '团': '團', '椭': '橢', '洼': '窪', '袜': '襪', '弯': '彎', '湾': '灣',
    '顽': '頑', '万': '萬', '网': '網', '韦': '韋', '违': '違', '围': '圍', '为': '為', '伪': '偽',
    '苇': '葦', '伟': '偉', '纬': '緯', '卫': '衛', '稳': '穩', '问': '問', '乌': '烏', '污': '汙',
    '诬': '誣', '无': '無', '吴': '吳', '芜': '蕪', '坞': '塢', '雾': '霧', '务': '務', '误': '誤',
    '系': '係', '戏': '戲', '细': '細', '虾': '蝦', '辖': '轄', '峡': '峽', '侠': '俠', '狭': '狹',
    '咸': '鹹', '显': '顯', '险': '險', '现': '現', '县': '縣', '线': '線', '献': '獻', '乡': '鄉',
    '厢': '廂', '镶': '鑲', '详': '詳', '样': '樣', '阳': '陽', '养': '養', '痒': '癢', '样': '樣',
    '钥': '鑰', '药': '藥', '爷': '爺', '叶': '葉', '页': '頁', '医': '醫', '仪': '儀', '亿': '億',
    '忆': '憶', '义': '義', '艺': '藝', '异': '異', '译': '譯', '绎': '繹', '诣': '詣', '议': '議',
    '谊': '誼', '艺': '藝', '阴': '陰', '荫': '蔭', '银': '銀', '饮': '飲', '隐': '隱', '应': '應',
    '英': '英', '营': '營', '蝇': '蠅', '颖': '穎', '哟': '喲', '拥': '擁', '佣': '傭', '踊': '踴',
    '咏': '詠', '涌': '湧', '忧': '憂', '优': '優', '邮': '郵', '铀': '鈾', '犹': '猶', '游': '遊',
    '诱': '誘', '与': '與', '屿': '嶼', '誉': '譽', '迁': '遷', '余': '餘', '鱼': '魚', '渔': '漁',
    '娱': '娛', '与': '與', '屿': '嶼', '誉': '譽', '迁': '遷', '余': '餘', '鱼': '魚', '渔': '漁',
    '语': '語', '育': '育', '狱': '獄', '欲': '欲', '谕': '諭', '喻': '喻', '御': '禦',
    '裕': '裕', '愈': '愈', '吁': '籲', '遇': '遇', '预': '預', '豫': '豫', '园': '園', '员': '員',
    '圆': '圓', '缘': '緣', '远': '遠', '愿': '願', '约': '約', '跃': '躍', '钥': '鑰', '岳': '嶽',
    '运': '運', '酝': '醞', '晕': '暈', '韵': '韻', '杂': '雜', '灾': '災', '斋': '齋', '在': '在',
    '再': '再', '赞': '贊', '赃': '贓', '脏': '髒', '凿': '鑿', '枣': '棗', '灶': '竈', '皂': '皂',
    '责': '責', '择': '擇', '泽': '澤', '贼': '賊', '赠': '贈', '扎': '紮', '札': '劄', '轧': '軋',
    '闸': '閘', '铡': '鍘', '诈': '詐', '斋': '齋', '债': '債', '沾': '沾', '毡': '氈', '战': '戰',
    '栈': '棧', '绽': '綻', '张': '張', '涨': '漲', '帐': '帳', '胀': '脹', '账': '賬', '赵': '趙',
    '折': '摺', '这': '這', '贞': '貞', '针': '針', '侦': '偵', '诊': '診', '阵': '陣', '镇': '鎮',
    '挣': '掙', '睁': '睜', '征': '徵', '狰': '猙', '争': '爭', '帧': '幀', '郑': '鄭', '证': '證',
    '织': '織', '职': '職', '执': '執', '侄': '侄', '掷': '擲', '质': '質', '挚': '摯', '滞': '滯',
    '致': '致', '钟': '鐘', '肿': '腫', '种': '種', '众': '眾', '昼': '晝', '骤': '驟', '猪': '豬',
    '诸': '諸', '诛': '誅', '烛': '燭', '煮': '煮', '瞩': '矚', '嘱': '囑', '贮': '貯', '铸': '鑄',
    '筑': '築', '住': '住', '注': '注', '祝': '祝', '驻': '駐', '专': '專', '砖': '磚', '转': '轉',
    '赚': '賺', '撰': '撰', '篆': '篆', '桩': '樁', '庄': '莊', '壮': '壯', '状': '狀', '准': '準',
    '浊': '濁', '总': '總', '纵': '縱', '邹': '鄒', '诅': '詛', '组': '組', '钻': '鑽', '罪': '罪',
    '尊': '尊', '昨': '昨', '作': '作', '坐': '坐', '座': '座',
  };

  // 将简体中文转换为繁体中文
  void _convertToTraditional() {
    final String input = _inputController.text.trim();
    if (input.isEmpty) {
      _outputController.clear();
      return;
    }

    String result = '';
    result = ChineseHelper.convertToTraditionalChinese(input);
    setState(() {
      _outputController.text = result;
    });
  }

  void _clearAll() {
    _inputController.clear();
    _outputController.clear();
  }

  void _copyToClipboard() {
    if (_outputController.text.isNotEmpty) {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text('已复制到剪贴板')),
      );
    }
  }

  @override
  void dispose() {
    _inputController.dispose();
    _outputController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return BaseToolPage(
      title: '中文转繁体',
      child: SingleChildScrollView(
        // 统一页面内边距为12
        padding: const EdgeInsets.all(12.0),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            InputOutputCard(
              inputController: _inputController,
              outputController: _outputController,
              inputLabel: '输入简体中文',
              outputLabel: '繁体中文结果',
              onClear: _clearAll,
              onCopy: _copyToClipboard,
            ),
            // 减少按钮与卡片间距
            const SizedBox(height: 10),
            CustomButton.primary(
              text: '转换',
              onPressed: _convertToTraditional,
              width: double.infinity,
            ),
            // 减少信息卡片间距
            const SizedBox(height: 10),
            Container(
              decoration: BoxDecoration(
                color: AppColors.background,
                borderRadius: BorderRadius.circular(8),
                border: Border.all(color: AppColors.border),
              ),
              padding: const EdgeInsets.all(12),
              child: const Text(
                '此工具可将简体中文文本转换为繁体中文文本。适用于需要在不同语言标准间转换文本的场景，如两岸三地的文档交流、繁体出版等。',
                style: AppTextStyles.hint,
              ),
            ),
          ],
        ),
      ),
    );
  }
}